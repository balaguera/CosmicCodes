{
 "Simulation": {  
    "status" : "off", 
    "redshift" : 0,
    "initial_redshift_sim" : 99.0,
    "initial_redshift_delta" : 0.0,
    "ic_index" : 1,
    "realization_index" : 1,
    "length_side_box" : 1000
},

"BiasAnalysis":{
    "status" : "on", 
    "output_directory" : "null",
    "DarkMatter":{
        "nbins" : 200,
        "mas" : 1,
        "mas_ref_pdf" : 1,
        "mas_new" : 1,
        "type_of_file" : "bin",
        "name_property" : "DENSITY",
        "name_aux" : "DM_z",
        "input_directory" : "/home/andres/data/Numerics/UNITSIM/REFERENCE/001/DM/SNAPSHOT_p128/",
        "input_directory_ref" : "null",
        "input_directory_ref_two" : "null",
        "input_directory_new" : "null",
        "input_directory_new_ref" : "null",
        "catalogue_file_mesh" : "dm_field_p128_Nres512_MAS1_downsampled_average.dat", 
        "catalogue_file_mesh_new" : "dm_field_p128_Nres512_MAS1_downsampled.dat",
        "catalogue_file_mesh_new_ref" : "dm_field_p128_Nres512_MAS1_downsampled.dat",
        "catalogue_file_mesh_ref_pdf" : "dm_field_p128_Nres512_MAS1_downsampled.dat",
        "convert_density_to_delta" : true,
        "velfieldx_file_mesh" : "null",
        "velfieldy_file_mesh" : "null",
        "velfieldz_file_mesh" : "null",
        "scale" : "log",
        "delta_min" : -1,
        "delta_max" : 200.0,
        "logdelta_min" : 0.0,
        "logdelta_max" : 2.0
    },
    "Tracers":{
        "nbins" : 100,
        "mas" : 0, 
        "type_of_file" : "bin",
        "name_property" : "DENSITY",
        "name_aux" : "TR",
        "input_directory" : "/home/andres/data/Numerics/UNITSIM/REFERENCE/001/HALOS/SNAPSHOT_p128/",
        "input_directory_two" : "/home/andres/data/Numerics/UNITSIM/001_Inv/HALOS/SNAPSHOT_p128/",
        "catalogue_file_mesh" : "UNITSIM_HALOS_Ncounts_Nft512_MAS0.dat",
        "catalogue_file_hr_mesh" : "null",
        "convert_density_to_delta" : false,
        "scale" : "linear",
        "delta_min" : 0.0,
        "delta_max" : 100,
        "logdelta_min" : -3.0,
        "logdelta_max" : 3.0,
        "nbins_mass" : 1,
        "nbins_sat_frac" : 1
    },

    "General":{
        "ngrid_ft" : 512,
        "redefine_limits" : false,
        "write_pdf_number_counts" : false,
        "compute_joint_pdf" : false,
        "compute_conditional_pdf" : false,
        "write_files_for_histograms" : false
    },

    "BiasMappingTechnique":{
        "number_iterations_kernel" : 400,
        "initial_iteration_kernel_average" : 300,
        "index_initial_iteration" : 0,
        "number_dark_matter_realizations_mock_generation" : 1,
        "number_iterations_preprocessing_dm" : 0,
        "write_outputs_at_iterations" : [400],
        "apply_rank_ordering" : false,
        "apply_rank_ordering_ab_initio" : false,
        "number_chunks_new_dm" : 1,
        "input_directory_BMT_kernel" : "null",
        "input_directory_BMT_kernel_second_calibration" : "null",
        "levels_main_property_multiscale_assignment" : [700.0, 500.0, 350.0, 300, 250.0],
        "mesh_resolutions_multiscale_assignment" : [16, 32, 64, 128, 180],
        "tolerance_property_multiscale_assignment" : [0.95, 0.9, 0.9, 0.8, 0.7],
        "mesh_size_closest_neighbour_collapse_towards_randoms" : 32,
        "distance_fraction_to_nearest_random_collapse" : 0.35,
        "mass_scale_exclusion" : 5e13,
        "use_velkernel_velocity_assignment" : false,
        "scale_length_velkernel" : 1.5,
        "velocity_bias_random" : 0,
        "velocity_bias_dm" : 0.0
    }
 },


"CWCAnalysis":{
    "status" : "off", 
    "output_directory" : "null",
    "box_size" : 1000.0,
    "min_x_coord" : 0.0,
    "min_y_coord" : 0.0,
    "min_z_coord" : 0.0,
    "ngrid_ft" : 512,
    "number_thresholds_cosmicweb_types" : 1,
    "lambda_threshold" : 0.0,
    "lambda_threshold_vshear" : 0.0,
    "nbins_mass_sknots" : 100,
    "nbins_mass_vknot" : 100,
    "cosmic_web_types_tidal" : [1, 2, 3, 4], 
    "cosmic_web_types_velshear" : [1, 2, 34]
 },



"FourierAnalysis" :{
    "status" : "on", 
    "output_directory" : "/home/andres/data/Numerics/CosmicCODES/output_power/",
    "statistics" : "Pk_fkp",
    "name_survey" : "UNITSIM_HALOS",
    "type_of_object" : "TRACER_REF",
    "input_type" : "catalog",
    "input_type_two" : "density_grid",
    "ntracers_for_delta_input" : 1.0,
    "number_of_random_files" : 1,
    "delta_grid_file" : "null",
    "delta_grid_file2" : "null",
    "delta_grid_file3" : "null",
    "delta_grid_file4" : "null",
    "measure_cross_power" : false,
    "measure_cross_power_using_a" : 1,
    "measure_cross_power_using_b" : 2,
    "get_new_line_of_sight" : false,
    "clustering_space" : "real_space",
    "box_size" : 1000,
    "box_size_lowres" : 1000,
    "get_new_box_size" : false,
    "min_x_coord" : 0,
    "min_y_coord" : 0,
    "min_z_coord" : 0,
    "ngrid_ft" : 512,
    "ngrid_ft_highres" : 1900,
    "ngrid_ft_lowres" : 128,   
    "ngrid_jk" : 5,   
    "output_interpolated_field" : true,
    "show_interpolated_field" : true,
    "mass_assignment_scheme" : "TSC",
    "use_correction_mass_assignment_scheme" : true,
    "type_of_kshell_binning" : "linear",
    "number_log_kbins" : 10,
    "delta_kmin" : 0,
    "ndel_kbinning_data" : 1,
    "ndel_kbinning_window" : 1,
    "use_fkp_weight" : false,
    "estimated_power" : 20000.0,
    "number_mu_bins" : 100,
    "use_shot_noise_correction" : true,
    "compute_fkp_variance" : false,
    "compute_fkp_variance_exact" : false,
    "output_file_power" : "null", 
    "show_power_spectrum" : true,
    "output_file_power_log" : "null", 
    "output_file_window" : "null",
    "output_file_power2d" : "null",
    "output_file_power2d_mk" : "null",
    "kmax_yamamoto_direct_sum" : 0.1,
    "kmax_bispectrum" : 0.2,
    "kmin_bispectrum" : 0,
    "use_fundamental_mode_as_kmin_bk" : false,
    "output_file_bispectrum" : "null"
 },


"DarkMatterCatalogue":{
    "status" : "off", 
    "input_directory" : "/home/andres/data/Numerics/UNITSIM/REFERENCE/001/DM/SNAPSHOT_p128/",
    "catalogue_file_mesh" : "dm_field_p128_Nres512_MAS1_downsampled_average.dat", 
    "file_bin_x_coord" : "null",
    "file_bin_y_coord" : "null",
    "file_bin_z_coord" : "null",
    "number_of_tracers_in_binary" : 2600,
    "use_low_pass_filter" : false,
    "system_of_coordinates" : 0,
    "i_coord1" : -0,
    "i_coord2" : -1,
    "i_coord3" : -2,
    "i_v1" : -4,
    "i_v2" : -5,
    "i_v3" : -6,
    "i_mass" : -1
 },

 "TracerCatalogue":{
    "status" : "on", 
    "input_directory" : "/home/andres/data/Numerics/UNITSIM/REFERENCE/001/HALOS/SNAPSHOT_p128/",
    "input_directory_catalogue_new_ref" : "null",
    "catalogue_file" : "out_128p_parent.list",
    "catalogue_file_new_ref" : "null", 
    "catalogue_file_mesh" : "null",
    "system_of_coordinates" : 0,
    "redshift_space_coordinates_included" : false,
    "angles_units" : "D",
    "velocity_units" : "kmps",
    "i_coord1" : 0,
    "i_coord2" : 1,
    "i_coord3" : 2,
    "i_v1" : 3,
    "i_v2" : 4,
    "i_v3" : 5,
    "i_mass" : 6,
    "i_vmax" : -7,
    "i_vrms" : -8,
    "i_rs" : -9,
    "i_spin" : -10,
    "i_spin_bullock" : -14,
    "i_virial" : -13,
    "i_rvir" : -15,
    "i_b_to_a" : -11,
    "i_c_to_a" : -12,
    "i_star_formation" : -1,
    "i_color" : -1,
    "i_stellar_mass" : -1,
    "i_mean_density" : -1,
    "i_abs_mag" : -1,
    "i_app_mag" : -1,
    "i_weight1" : -1,
    "use_weight1" : false,
    "i_weight2" : -1,
    "use_weight2" : false,
    "i_weight3" : -1,
    "use_weight3" : false,
    "i_weight4" : -1,
    "use_weight4" : false,
    "weight_with_mass" : false,
    "weight_vel_with_mass" : false
},


"RandomCatalogue":{
    "status" : "off", 
    "use_random_catalogue" : false,
    "input_directory" : "null",
    "random_catalogue_file" : "null", 
    "nbar_tabulated" : false,
    "use_external_file_nbar" : false,
    "file_nbar" : "null",
    "sys_of_coord" : 2,
    "angles_units" : "D",
    "i_coord1" : 1,
    "i_coord2" : 2,
    "i_coord3" : 3,
    "i_mass" : -1,
    "i_color" : -1,
    "i_stellar_mass" : -1,
    "i_app_mag" : -1,
    "i_abs_mag" : -1,
    "i_mean_density" : 4,
    "i_weight1" : 7,
    "use_weight1" : false,
    "i_weight2" : 15,
    "use_weight2" : false,
    "i_weight3" : 16,
    "use_weight3" : false,
    "i_weight4" : 17,
    "use_weight4" : false,
    "compute_window_matrix" : false
},

"SurveyProperties":{
    "status" : "off", 
    "constant_sky_depth" : false,
    "redshift_min_sample" : 0.4,
    "redshift_max_sample" : 0.8,
    "area_survey_sky" : 41253,
    "MaskProperties":{
        "i_mask_pixel" : -1,
        "i_mask_alpha" : -1,
        "i_mask_delta" : -1,
        "i_mask_flag" : -1
    },
    "RedshiftHistograms":{
        "number_bins_dndz" : 100,
        "new_number_bins_dndz" : 60,
        "output_file_dndz":""
    }
},

"GalaxyAnalysis":{
    "status" : "off", 
    "output_directory" : "null",
    "measure_stellar_mass_function" : false,
    "measure_luminosity_function" : false,
    "measure_color_distribution" : false,
    "luminosity_function_estimator" : "Vmax_o",
    "compute_color_magnitude plane" : false,
    "generate_random_catalogue" : false,
    "number_bins_color" : 1,
    "min_color" : 0,
    "max_color" : 1,
    "number_bins_stellar_mass" : 1,
    "min_stellar_mass" : 0,
    "max_stellar_mass" : 1
},

"HaloAnalysis":{
    "status" : "on", 
    "output_directory" : "../output_ibias/",
    "mass_units" : 1,
    "number_bins_histograms" : 200,
    "number_mass_bins" : 200,
    "number_mass_bins_mass_function" : 200,
    "number_mass_bins_power_spectrum" : 4,
    "min_logmass" : 11.3,
    "max_logmass" : 16.0,
    "min_vmax" : 160.0,
    "max_vmax" : 1300.0,
    "min_rs" : 1,
    "max_rs" : 1200.0,
    "min_spin" : 1e-5,
    "max_spin" : 1.4,
    "number_sec_property_bins_assignment_bmt" : 200,
    "set_bins_equal_number_tracers_main_property" : false,
    "number_of_bins_equal_number_tracers_main_property" : 5, 
    "set_bins_equal_number_tracers" : true,
    "number_of_bins_equal_number_tracers" : 4,
    "mass_cuts" : [12.0, 13.0],
    "min_massbins" : [11.2, 14.5], 
    "max_massbins" : [15.0,15.0],
    "min_vmaxbins" : [1.5, 3.1],
    "max_vmaxbins" : [3.3, 3.3],
    "min_rsbins" : [0.00],
    "max_rsbins" : [1000.0],
    "min_spinbins" : [0.00],
    "max_spinbins" : [20.000],
    "min_vrmsbins" : [0.00], 
    "max_vrmsbins" : [1000.0],
    "min_virialbins" : [0.0],
    "max_virialbins" : [40.0], 
    "min_btoabins" : [0.0], 
    "max_btoabins" : [40.0], 
    "min_ctoabins" : [0.0], 
    "max_ctoabins" : [40.0], 
    "min_machbins" : [0.0], 
    "max_machbins" : [40.0],
    "min_dachbins" : [0.0], 
    "max_dachbins" : [40.0], 
    "min_biasbins" : [-2.0], 
    "max_biasbins" : [2.0], 
    "min_lcbins" : [-2.0], 
    "max_lcbins" : [2.0], 
    "min_tabins" : [-2.0], 
    "max_tabins" : [2.0], 
    "min_phbins" : [-0.3, 0.7],
    "max_phbins" : [0.8, 0.8],
    "use_real_and_redshift_space" : true,
    "compute_pearson_correlation_coefficient" : false,
    "compute_spearman_coefficient" : false,
    "perform_principal_component_analysis" : true,
    "measure_marked_power_spectrum" : false,
    "measure_power_spectrum" : true,
    "measure_cross_power_spectrum" : false,
    "get_tracer_number_counts" : true,
    "get_tracer_mass_field" : false,
    "get_tracer_vmax_field" : false,
    "get_tracer_spin_field" : false,
    "get_tracer_prop_function" : false,
    "get_tracer_prop_function_cwt" : false,
    "get_cell_local_mach_number" : false,
    "get_tracer_local_mach_number" : false,
    "get_tracer_local_dach_number" : false,
    "get_tracer_local_dm_density" : true,
    "scale_mach_number" : 5.0,
    "get_local_overdensity" : false,
    "get_tidal_anisotropy_at_halo" : false,
    "get_peak_height_at_halo" : true,
    "get_distribution_minimum_separations" : false,
    "IndividualTracerBias":{
        "get_individual_tracer_bias" : true,
        "assign_bias_to_full_sample" : false,
        "fraction_to_dilute_sample" : 0.2,
        "get_tracer_relative_bias" : false,
        "get_tracer_quadratic_bias" : false,
        "get_tracer_bias_squared" : false,
        "get_tracer_bias_multipoles" : false,
        "max_kvalue_tracer_bias" : 0.07,
        "min_kvalue_tracer_bias" : 0.02,
        "min_kvalue_tracer_qbias" : 0.02,
        "max_kvalue_tracer_qbias" : 0.08,
        "max_multipole_tracer_lmbias" : 8
    }
},

"CorrelationFunction":{
    "status" : "off", 
    "output_directory" : "null",
    "number_bins_separation" : 30,
    "min_separation" : 10.0,
    "max_separation" : 300.0,
    "binning_type" : "log",
    "property_as_mark" : "mass"
},


"AngularPowerSpectrum" :{
    "status" : "off", 
    "output_directory" : "null",
    "use_random_catalog" : false
},

"FourierBessel" :{
    "status" : "off", 
    "output_directory" : "null",
    "use_random_catalog" : false

},


"InitialConditions" :{
    "status" : "on", 
    "inputmode" : 0,
    "seed" : 1,
    "seed_ref" : 0,
    "diffcosmorz" : false,
    "ic_power_file" : "Pk_Planck15_Table4.txt",
    "ic_white_noise_directory" : "null",
    "ic_white_noise_file" : "null",
    "ic_file" : "null",
    "use_ic_file" : true,
    "ic_input_type" : "delta",
    "normalize_ic_to_initial_redshift" : false , 
    "initial_redshift_theoretical_power_file" : 0.0,
    "input_directory" : "/home/andres/data/Numerics/UNITSIM/REFERENCE/001/IC/",
    "transf" : false,
    "read_theoretical_power_spectrum" : true,
    "masskernel" : 0, 
    "masskernel_vel" : 1.0,
    "smoothing_length" : 10.0,
    "velbias" : 0.0,
    "vslength" : 0.0,
    "GaussianRandomField":{
        "max_kvalue_fa": 0.2,
        "number_of_gaussian_random_field" : 1,
        "generate_fixed_amplitude_initial_conditions" : true
       }
    },

"CosmologicalLibrary":{
    "status" : "off", 
    "output_directory" : "/home/andres/data/Numerics/CosmicCODES/output_cosmolib/",
    "cosmological_redshift" :  0.0,
    "fixed_cosmological_redshift" : true,
    "min_redshift" : 0.001,
    "max_redshift" : 10.0,
    "number_values_redshift" : 200,
    "MassFunctionTH" : {
        "mass_function_fit": "Tinker",
        "min_mass_mf" : 1e7, 
        "max_mass_mf" : 1e16, 
        "min_effective_mass" : 5e7,
        "max_effective_mass" : 1e15,
        "mass_scaling" : "log",
        "number_values_mass_function" : 200, 
        "use_external_power_spectrum_file" : false,
        "external_linear_power_spectrum_file" : "null",
        "show_plot" : true
    },
    "HaloBiasTH" :{
        "halo_bias_fit": "Tinker",
        "show_plot" : true
    },
  
    "DarkMatterHaloDensityProfile":{
        "compute_density_profile" :  true,
        "density_profile_model" :  "nfw",
        "min_radius_dp" :  0.01,
        "max_radius_dp" :  100,
        "radius_dp_scaling" :  "log",
        "number_rvalues_density_profile" :  200, 
        "coef_concentration_amp" : 9.0,
        "coef_concentration" :  -0.13,
        "show_plot_r" : true,
        "min_kvalue_dp" : 1e-3,
        "max_kvalue_dp" : 1e3,
        "kval_dp_scaling" : "log" ,
        "number_kvalues_density_profile" : 200,
        "show_plot_k" : true
    },

    "HOD":{
        "hod_model" :  1,
        "muno_hod" :  1.51e13,
        "alpha_hod" :  1.151,
        "mmin_hod" :  1.77e12,
        "scatter_hod" :  0.897
    },

    "PowerSpectrumTH" :{
        "compute_linear_power_spectrum": true,
        "compute_non_linear_power_spectrum_halofit": true,
        "compute_non_linear_power_spectrum_pt": true,
        "compute_halo_model_galaxy_power_spectrum" : true,
        "min_kvalue_power_spectrum":1e-4,
        "max_kvalue_power_spectrum":1e4,
        "kval_scaling" : "log",
        "min_kvalue_for_integration" : 5e-4,
        "max_kvalue_for_integration" : 5e3,
        "number_of_values_power_spectrum": 500,
        "show_plot" : true
 
    },
    "CorrelationFunctionTH":{
        "compute_linear_correlation_function" : true,
        "compute_non_linear_correlation_function_halofit" : false,
        "compute_non_linear_correlation_function_pt" : false,
        "compute_halo_model_galaxy_correlation_function" : false,
        "min_r_value_correlation_function" : 0.1,
        "max_r_value_correlation_function" : 300.0,
        "separation_scaling" : "log",
        "number_of_values_correlation_function" : 200 
    },
  
    "AngularPowerSpectrumTH" :{

    },
  
    "CosmologicalParameters":{
        "Hubble" :  100.0,
        "om_matter" :  0.3089,
        "om_cdm" :  0.2658,
        "om_radiation" :  0,
        "om_baryons" :  0.044,
        "om_vac" :  0.6471,
        "om_k" :  0.0,
        "spectral_index" :  0.9667,
        "wde_eos" :  -1.00,
        "hubble" :  0.6774,
        "N_eff" :  3.046,
        "sigma8" :  0.8147,
        "A_s" :  2.2e-9,
        "alpha_s" :  0.0,
        "Tcmb" :  2.725,
        "RR" :  8.0,
        "use_wiggles" :  true,
        "kstar" :  1e8,
        "GAL_BIAS" :  1.0, 
        "Amc" :  1.0,
        "Get_SO_from_BN" :  false,
        "Delta_SO" :  220.0
    }
}



}
